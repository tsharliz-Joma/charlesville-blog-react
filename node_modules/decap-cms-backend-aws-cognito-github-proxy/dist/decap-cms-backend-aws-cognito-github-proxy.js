!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("decap-cms-backend-github"),require("react"),require("decap-cms-ui-auth"),require("@emotion/react")):"function"==typeof define&&define.amd?define("DecapCmsBackendAwsCognitoGithubProxy",["decap-cms-backend-github","react","decap-cms-ui-auth","@emotion/react"],t):"object"==typeof exports?exports.DecapCmsBackendAwsCognitoGithubProxy=t(require("decap-cms-backend-github"),require("react"),require("decap-cms-ui-auth"),require("@emotion/react")):e.DecapCmsBackendAwsCognitoGithubProxy=t(e.DecapCmsBackendGithub,e.React,e.DecapCmsUiAuth,e.DecapCmsDefaultExports.EmotionCore)}(window,(e,t,r,o)=>(()=>{"use strict";var s={110(e){e.exports=o},119(e){e.exports=t},403(t){t.exports=e},484(e){e.exports=r}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return s[e](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a={};i.d(a,{DecapCmsBackendAwsCognitoGithubProxy:()=>d});var c=i(403),u=(i(119),i(484)),p=i(110);class h extends c.GitHubBackend{constructor(e,t={}){super(e,t),this.bypassWriteAccessCheckForAppTokens=!0,this.tokenKeyword="Bearer"}authComponent(){const e=e=>{const t={...e,backend:this};return(0,p.jsx)(u.PKCEAuthenticationPage,t)};return e.displayName="AuthenticationPage",e}async currentUser({token:e}){return this._currentUserPromise||(this._currentUserPromise=fetch(this.baseUrl+"/oauth2/userInfo",{headers:{Authorization:`${this.tokenKeyword} ${e}`}}).then(async e=>{if(401==e.status)return this.logout(),Promise.reject("Token expired");const t=await e.json(),r=this.originRepo.split("/")[1];return{name:t.email,login:r,avatar_url:`https://github.com/${r}.png`}})),this._currentUserPromise}async getPullRequestAuthor(e){return e.user?.login}}const d={AwsCognitoGitHubProxyBackend:h,API:c.API};return a.DecapCmsBackendAwsCognitoGithubProxy})());
//# sourceMappingURL=decap-cms-backend-aws-cognito-github-proxy.js.map